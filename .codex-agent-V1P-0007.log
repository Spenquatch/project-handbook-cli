OpenAI Codex v0.93.0 (research preview)
--------
workdir: /Users/spensermcconnell/__Active_Code/project-handbook-cli
model: gpt-5.2
provider: openai
approval: never
sandbox: danger-full-access
reasoning effort: high
reasoning summaries: auto
session id: 019c2aa8-f9ad-7be2-aa5b-4dafedc272a8
--------
user
You are the background Coding Agent for a single strict-parity task.

TASK
- ID: V1P-0007
- Title: Parity: `make help parking` / `make help-parking` ‚Üí `ph help parking`
- Scope guardrail: ONLY work on V1P-0007. Do not touch other task IDs.

CHECKLIST SUBSECTION (from cli_plan/PARITY_CHECKLIST.md)
### Help
- `make help parking` / `make help-parking` ‚Üí `ph help parking`
  - Preconditions: none
  - Command: `ph --root <PH_ROOT> help parking`
  - Outputs to verify: (none; stdout only)

LEGACY REFERENCE
- Legacy repo (canonical): /Users/spensermcconnell/__Active_Code/oss-saas/project-handbook
- Invoke legacy behavior with: `pnpm make -- <target>`

DISPOSABLE PH_ROOT (required)
- Create a disposable copy of the legacy repo into a fresh temp dir and use that as PH_ROOT for BOTH legacy and `ph` runs.

COMMANDS TO RUN (exact; adjust only if needed)
1) Create PH_ROOT and copy legacy repo:
- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"

2) Install deps once in PH_ROOT for legacy runs:
- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)

3) Capture legacy stdout (both spellings):
- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt

4) Capture `ph` stdout:
- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt

5) Compare outputs:
- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt

ACCEPTANCE CRITERIA
- `ph --root <PH_ROOT> help parking` stdout matches legacy `pnpm make -- help parking` stdout byte-for-byte.
- If mismatch: update implementation and add/adjust deterministic pytest tests that lock parity.
- Run: `uv run ruff check .` and `uv run pytest -q` before reporting completion.

BOOKKEEPING (must follow)
- Update `cli_plan/tasks_v1_parity.json` for V1P-0007:
  - set `status: done`
  - add `completed_at: <UTC ISO timestamp>`
- Fill in the already-appended session log stub at the end of `cli_plan/session_logs.md` for V1P-0007.
  - Keep it appended at end; do NOT insert it earlier in the file.
  - Ensure Inputs reviewed includes: `cli_plan/AI_AGENT_START_HERE.md`, `cli_plan/tasks_v1_parity.json (task V1P-0007)`, `cli_plan/PARITY_CHECKLIST.md`, `cli_plan/v1_cli/CLI_CONTRACT.md`.

COMMIT (required)
- Commit exactly one atomic commit for this task:
  - message: `Parity: V1P-0007 help parking`
  - Do NOT add/commit any `ph-parity-*.done` marker files or other untracked artifacts.
  - Prefer an explicit `git add ...` list over `git add -A`.

REPORT BACK WITH
- commands executed (exact)
- files changed (exact)
- verification evidence
- the exact commit hash created
- any follow-ups / discovered drift

COMPLETION SENTINEL (required)
- Print exactly one line at the end: `DONE: V1P-0007 ‚Äî <short summary>`
- Write a marker file (untracked): `ph-parity-V1P-0007.done`

mcp: deepwiki starting
mcp: google-docs-mcp starting
mcp: playwright starting
mcp: google-docs-mcp failed: MCP client for `google-docs-mcp` failed to start: MCP startup failed: handshaking with MCP server failed: connection closed: initialize response
mcp: playwright ready
mcp: deepwiki failed: MCP client for `deepwiki` failed to start: MCP startup failed: handshaking with MCP server failed: connection closed: initialize response
mcp startup: ready: playwright; failed: google-docs-mcp, deepwiki
Plan update
  ‚Üí Load task and skill instructions
  ‚Ä¢ Run legacy vs ph parity diff
  ‚Ä¢ Implement parity and add tests
  ‚Ä¢ Run ruff and pytest
  ‚Ä¢ Update bookkeeping and commit
  ‚Ä¢ Create marker and report
exec
/bin/zsh -lc ls in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 42ms:
README.md
cli_plan
docs
legacy-reference
mkdocs.yml
ph-parity-V1P-0002.done
ph-parity-V1P-0003.done
ph-parity-V1P-0004.done
ph-parity-V1P-0005.done
ph-parity-V1P-0006.done
pyproject.toml
pytest.ini
site
src
tests
uv.lock
exec
/bin/zsh -lc "sed -n '1,200p' /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 37ms:
---
name: coding-agent
description: Run Codex CLI, Claude Code, OpenCode, or Pi Coding Agent via background process for programmatic control.
metadata:
  short-description: Run other coding agents via CLI
  openclaw:
    emoji: "üß©"
    requires:
      anyBins: ["claude", "codex", "opencode", "pi"]
---

# Coding Agent (bash-first)

Use **bash** (with optional background mode) for all coding agent work. Simple and effective.

## ‚ö†Ô∏è PTY Mode Required!

Coding agents (Codex, Claude Code, Pi) are **interactive terminal applications** that need a pseudo-terminal (PTY) to work correctly. Without PTY, you'll get broken output, missing colors, or the agent may hang.

**Always use `pty:true`** when running coding agents:
exec
/bin/zsh -lc "ls cli_plan && sed -n '1,200p' cli_plan/AI_AGENT_START_HERE.md && sed -n '1,200p' cli_plan/PARITY_CHECKLIST.md && sed -n '1,200p' cli_plan/v1_cli/CLI_CONTRACT.md" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 38ms:
AI_AGENT_START_HERE.md
PARITY_CHECKLIST.md
README.md
archive
backlog.json
due-diligence.json
ph_spec
project_handbook.config.json
session_logs.md
tasks_v1_next.json
tasks_v1_parity.json
v0_make
v1_cli
---
title: CLI Plan ‚Äì AI Agent Start Here
type: process
date: 2026-01-14
tags: [cli, plan, execution, agent]
links:
  - ./archive/tasks_legacy.json
exec
/bin/zsh -lc 'tail -n 80 cli_plan/session_logs.md' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 32ms:

Goal:
Match legacy `pnpm make -- help backlog` stdout byte-for-byte via `ph --root <PH_ROOT> help backlog`.

Work performed (ordered):
1. Captured legacy stdout for `help backlog` (and `help-backlog`) against a disposable `PH_ROOT`.
2. Captured `ph` stdout for `help backlog` against the same `PH_ROOT` and diffed outputs.
3. Updated `src/ph/help_text.py` backlog topic to mirror legacy `make backlog-*` help text.
4. Added a deterministic pytest asserting exact stdout for `ph help backlog`.

Commands executed (exact):
- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0006-XXXXXXXX)"
- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
- (cd "$PH_ROOT" && pnpm make -- help backlog) > /tmp/legacy-help-backlog.txt
- (cd "$PH_ROOT" && pnpm make -- help-backlog) > /tmp/legacy-help-backlog-dashed.txt
- uv run ph --root "$PH_ROOT" help backlog > /tmp/ph-help-backlog.txt
- diff -u /tmp/legacy-help-backlog.txt /tmp/ph-help-backlog.txt
- uv run ruff check .
exec
/bin/zsh -lc "cat cli_plan/tasks_v1_parity.json | python -c 'import json,sys;d=json.load(sys.stdin);print([t for t in d if t.get(\"id\")==\"V1P-0007\"][0])'" in /Users/spensermcconnell/__Active_Code/project-handbook-cli exited 1 in 106ms:
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "<string>", line 1, in <listcomp>
AttributeError: 'str' object has no attribute 'get'
exec
/bin/zsh -lc "python - <<'PY'
import json
p='cli_plan/tasks_v1_parity.json'
with open(p) as f:
  d=json.load(f)
# handle dict with tasks key
if isinstance(d, dict):
  tasks=d.get('tasks', d.get('items', []))
else:
  tasks=d
for t in tasks:
  if t.get('id')=='V1P-0007':
    print(json.dumps(t, indent=2))
    break
else:
  print('not found')
PY" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 134ms:
{
  "id": "V1P-0007",
  "phase_id": "PHASE-P01",
  "order": 7,
  "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
  "status": "in_progress",
  "started_at": "2026-02-04T21:56:20Z",
  "depends_on": [],
  "work_location": "cli_repo",
  "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
}



thinking
**Finalizing implementation steps**

I'm continuing with the task as it's already in progress. Now, I need to run a legacy versus ph diff using the specified commands and a disposable PH_ROOT. The user‚Äôs instructions take precedence, so I'll copy from the canonical legacy repository. I must ensure the disposable copy excludes .git and use rsync. After that, I‚Äôll run `pnpm install --frozen-lockfile` and capture outputs. Finally, I'll run `uv run ph --root "$PH_ROOT" help parking` and compare the diff.
thinking
**Running checks and updating status**

I need to run a couple of commands: `uv run ruff check .` and `uv run pytest -q`. After that, I'll update the status to done and add a completed_at timestamp in UTC ISO format while filling in the session log. I‚Äôll commit with an atomic message, staging only the relevant files and code changes. Importantly, I won‚Äôt mention any marker file in the commit or stage untracked marker files. Then, I‚Äôll ensure the help output aligns with legacy by capturing relevant information.
thinking
**Capturing outputs and adjusting the plan**

I need to capture outputs to /tmp, following the user‚Äôs list of commands that involve variables. It's easier to run a single script that defines these variables and executes all commands while printing them out. However, I must execute the commands exactly as instructed since they need to be reported back that way. I'll record everything in the session log as well. It seems step one is done; we've loaded the instructions, so I'll update the plan state and continue.
Plan update
  ‚úì Load task and skill instructions
  ‚Üí Run legacy vs ph parity diff
  ‚Ä¢ Implement parity and add tests
  ‚Ä¢ Run ruff and pytest
  ‚Ä¢ Update bookkeeping and commit
  ‚Ä¢ Create marker and report
exec
/bin/zsh -lc 'set -euo pipefail
LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
echo "LEGACY_SRC=$LEGACY_SRC"
echo "PH_ROOT=$PH_ROOT"
rsync -a --delete --exclude '"'.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' \""'$LEGACY_SRC/" "$PH_ROOT/"
(cd "$PH_ROOT" && pnpm install --frozen-lockfile)
(cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
(cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
# show whether the two legacy spellings differ
if diff -u /tmp/legacy-help-parking.txt /tmp/legacy-help-parking-dashed.txt >/dev/null; then
  echo "Legacy help parking == help-parking"
else
  echo "Legacy help parking != help-parking (unexpected)"
fi
# compare legacy to ph
set +e
diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
status=$?
set -e
if [ $status -eq 0 ]; then
  echo "PARITY: match"
else
  echo "PARITY: mismatch"
fi
' in /Users/spensermcconnell/__Active_Code/project-handbook-cli exited 1 in 1.52s:
LEGACY_SRC=/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook
PH_ROOT=/var/folders/2x/5mqqp02j36v079m96nx8fjs00000gn/T/ph-parity-V1P-0007-XXXXXXXX.mqLCR9REeG
Already up to date

Done in 152ms using pnpm v10.11.1
Legacy help parking != help-parking (unexpected)
--- /tmp/legacy-help-parking.txt	2026-02-04 16:58:16
+++ /tmp/ph-help-parking.txt	2026-02-04 16:58:17
@@ -3,7 +3,7 @@
 > make -- help parking
 
 Parking lot workflow commands
-  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
-  make parking-list [category=labs] [format=table]
-  make parking-review            - Guided quarterly review session
-  make parking-promote item=FEAT-001 target=later
+  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
+  ph parking list [--category labs] [--format table]
+  ph parking review            - Guided quarterly review session
+  ph parking promote --item FEAT-001 --target later

thinking
**Updating help topic**

I need to update the help topic 'parking' to align with legacy standards. First, I'll check the difference between `help parking` and `help-parking` since they differ unexpectedly. I plan to compare the contents of two temporary files and look at the current output. Also, I need to note that the shell script aborted due to a special variable in zsh, but I've printed the mismatch diff. I should list all executed commands in my report. Finally, I'll update `src/ph/help_text.py` regarding the parking topic. I'll inspect it and ensure it pulls from the help_text module correctly.
exec
/bin/zsh -lc "sed -n '1,200p' /tmp/legacy-help-parking.txt && echo '---' && sed -n '1,200p' /tmp/legacy-help-parking-dashed.txt && echo '---' && sed -n '1,200p' /tmp/ph-help-parking.txt" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 51ms:

> project-handbook@0.0.0 make /private/var/folders/2x/5mqqp02j36v079m96nx8fjs00000gn/T/ph-parity-V1P-0007-XXXXXXXX.mqLCR9REeG
> make -- help parking

Parking lot workflow commands
  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
  make parking-list [category=labs] [format=table]
  make parking-review            - Guided quarterly review session
  make parking-promote item=FEAT-001 target=later
---

> project-handbook@0.0.0 make /private/var/folders/2x/5mqqp02j36v079m96nx8fjs00000gn/T/ph-parity-V1P-0007-XXXXXXXX.mqLCR9REeG
> make -- help-parking

Parking lot workflow commands
  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
  make parking-list [category=labs] [format=table]
  make parking-review            - Guided quarterly review session
  make parking-promote item=FEAT-001 target=later
---
exec
/bin/zsh -lc 'rg -n "help parking|parking topic|Parking lot workflow" -S src/ph || true' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 43ms:
src/ph/help_text.py:18:  make help parking     # parking lot ideas
src/ph/help_text.py:83:    "parking": """Parking lot workflow commands
exec
/bin/zsh -lc "ls src/ph && sed -n '1,220p' src/ph/help_text.py" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 40ms:
__init__.py
__main__.py
__pycache__
backlog.py
backlog_manager.py
clean.py
cli.py
clock.py
config.py
context.py
daily.py
dashboard.py
doctor.py
end_session.py
feature.py
feature_archive.py
feature_status_updater.py
git_hooks.py
help_text.py
history.py
exec
/bin/zsh -lc "rg -n \"def help|\\bhelp\\b\" src/ph -S | head" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 39ms:
src/ph/cli.py:100:        p.add_argument("--root", default=default, help="Path to the handbook instance repo root")
src/ph/cli.py:105:            help="Select data scope (default: project)",
src/ph/cli.py:111:            help="Disable post-command hook (history + validate)",
src/ph/cli.py:117:            help="Disable history logging",
src/ph/cli.py:123:            help="Disable post-command validate-quick",
src/ph/cli.py:134:    version_parser = subparsers.add_parser("version", help="Print installed ph version", parents=[sub_common])
src/ph/cli.py:137:    init_parser = subparsers.add_parser("init", help="Initialize a new handbook instance repo", parents=[sub_common])
src/ph/cli.py:144:        help="Update/create .gitignore with recommended handbook ignores (default)",
src/ph/cli.py:151:        help="Do not read or write .gitignore",
src/ph/cli.py:157:        help="Check repo compatibility and required assets",
exec
/bin/zsh -lc 'rg -n "help_text" -S src/ph tests | head -n 50' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 39ms:
src/ph/cli.py:30:from .help_text import get_help_text
src/ph/cli.py:549:                text = get_help_text(topic)
src/ph/help_text.py:119:def get_help_text(topic: str | None) -> str | None:
exec
/bin/zsh -lc "python - <<'PY'
import itertools
from pathlib import Path
p=Path('src/ph/cli.py')
lines=p.read_text().splitlines()
for i in range(520,620):
    print(f\"{i+1:4d} {lines[i]}\")
PY" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 129ms:
 521         print(str(exc), file=sys.stderr, end="")
 522         return 2
 523 
 524     exit_code = 0
 525     ctx = None
 526 
 527     def _build_ctx() -> None:
 528         nonlocal ctx
 529         config = load_handbook_config(ph_root)
 530         validate_handbook_config(config)
 531         scope = resolve_scope(cli_scope=getattr(args, "scope", None))
 532         ctx = build_context(ph_root=ph_root, scope=scope)
 533 
 534     if args.command == "doctor":
 535         result = run_doctor(ph_root)
 536         stream = sys.stdout if result.exit_code == 0 else sys.stderr
 537         print(result.output, file=stream, end="")
 538         exit_code = result.exit_code
 539     else:
 540         try:
exec
/bin/zsh -lc "sed -n '1,220p' tests/test_help_topics.py" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 61ms:
from __future__ import annotations

import subprocess
from pathlib import Path


def _write_minimal_ph_root(ph_root: Path) -> None:
    config = ph_root / "project_handbook.config.json"
    config.parent.mkdir(parents=True, exist_ok=True)
    config.write_text(
        '{\n  "handbook_schema_version": "1",\n  "requires_ph_version": ">=0.1.0,<0.2.0",\n  "repo_root": "."\n}\n',
        encoding="utf-8",
    )


def _write_legacy_like_package_json(ph_root: Path) -> None:
    (ph_root / "package.json").write_text(
        '{\n  "name": "project-handbook",\n  "version": "0.0.0"\n}\n',
        encoding="utf-8",
    )

thinking
**Investigating file truncation**

It looks like the file truncation happened because of the output tool. Actually, it seems sed truncated it due to the maximum output lines. I see it printed 220 lines, but it got truncated at line 120 due to the formatting.

I might need to retrieve the full file later, but I can probably just append the new expected stdout function for the parking topic like before. I plan to reopen the rest of the file from where it was truncated and continue using sed.
exec
/bin/zsh -lc "sed -n '220,520p' tests/test_help_topics.py" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 51ms:


def test_help_backlog_stdout_matches_legacy_pnpm_make_help_backlog(tmp_path: Path) -> None:
    _write_minimal_ph_root(tmp_path)
    _write_legacy_like_package_json(tmp_path)
    resolved = tmp_path.resolve()

    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "backlog"], capture_output=True)
    assert result.returncode == 0
    assert result.stdout == _expected_help_backlog_stdout(resolved=resolved)

    history_log = tmp_path / ".project-handbook" / "history.log"
    assert history_log.exists()
    assert history_log.stat().st_size > 0
    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()


def test_help_topics_exist(tmp_path: Path) -> None:
    _write_minimal_ph_root(tmp_path)
    for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):




thinking
**Examining test outputs**

Currently, tests for various topics exist, but mainly for explicit expected outputs like sprints or releases, and not for areas like parking or validation. I plan to add a deterministic test for parking to ensure we have parity. The acceptance criteria require us to match legacy output, including a specific preamble.

For parking, I can mimic legacy output by ensuring spacing matches exactly. For example, the `parking-review` command needs to have that precise two-space gap before the hyphen.
thinking
**Clarifying output formatting**

In the output file, I noticed that the line for `make parking-review` has 12 spaces. The current output for `ph parking review` is similar, but I need to copy that exact line. I'll also verify if the output ends with a newline since the original captured file does. After checking, I'll confirm if we need to include a trailing newline in our expected bytes. 

It's crucial to ensure that the `help_text` string also ends with a newline. I‚Äôll make sure all topics align correctly.
thinking
**Finalizing legacy help commands**

We need to ensure that the output for "help parking" matches legacy standards, including an initial blank line and the preamble with the absolute path. The `ph` command uses `_format_pnpm_make_preamble`, so I‚Äôll update the `help_text` topic to reflect this.

Now, should the `ph help parking` command match `make help-parking`? The checklist suggests both commands align, so that‚Äôs important. I also need to update the tasks JSON with the status and completion timestamp. 

Finally, I‚Äôll commit the necessary changes and create a marker file while remembering not to track it.
thinking
**Preparing for updates and checks**

After committing my changes, I'll create the new marker file. However, I see there are already marker files (2-6) at the repo root that might be untracked, so I need to check the `git status` to ensure I don't accidentally add them.

It's also crucial to use a disposable `PH_ROOT` for both legacy and `ph` runs, which we already did. I'll fix the parity mismatch and rerun the commands to verify that the diff is clean. I want to stay focused on modifications related only to V1P-0007. Let's get to implementing those changes now!
Plan update
  ‚úì Load task and skill instructions
  ‚úì Run legacy vs ph parity diff
  ‚Üí Implement parity and add tests
  ‚Ä¢ Run ruff and pytest
  ‚Ä¢ Update bookkeeping and commit
  ‚Ä¢ Create marker and report
file update
M /Users/spensermcconnell/__Active_Code/project-handbook-cli/src/ph/help_text.py
@@ -83,6 +83,6 @@
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
apply_patch(auto_approved=true) exited 0 in 17ms:
Success. Updated the following files:
M src/ph/help_text.py
file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)

file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)

file update
M /Users/spensermcconnell/__Active_Code/project-handbook-cli/tests/test_help_topics.py
@@ -116,2 +116,16 @@
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
@@ -236,2 +250,17 @@
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
apply_patch(auto_approved=true) exited 0 in 30ms:
Success. Updated the following files:
M tests/test_help_topics.py
file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):


thinking
**Considering script execution**

I'm planning to run the script with `set -e`, which means if there are any differences, it will cause an exit code of 1, and the script will fail. However, I want to see the differences. Maybe I should run `diff` without the `-e` option or handle it differently. Since acceptance requires a match for success, I want to ensure if there's no diff, it returns 0 and produces no output. Alright, let‚Äôs give it a go!
exec
/bin/zsh -lc 'set -euo pipefail
LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
rsync -a --delete --exclude '"'.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' \""'$LEGACY_SRC/" "$PH_ROOT/"
(cd "$PH_ROOT" && pnpm install --frozen-lockfile)
(cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
(cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 1.52s:
Already up to date

Done in 159ms using pnpm v10.11.1
file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

Plan update
  ‚úì Load task and skill instructions
  ‚úì Run legacy vs ph parity diff
  ‚úì Implement parity and add tests
  ‚Üí Run ruff and pytest
  ‚Ä¢ Update bookkeeping and commit
  ‚Ä¢ Create marker and report
file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

exec
/bin/zsh -lc 'set -euo pipefail
uv run ruff check .
uv run pytest -q
' in /Users/spensermcconnell/__Active_Code/project-handbook-cli exited 124 in 10.01s:
All checks passed!
........................................................................ [ 52%]
............................................................
file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):


thinking
**Adjusting timeout settings**

It seems like the command timed out after the default of 10 seconds. It printed "ruff check passed" and had some progress with pytest before timing out. I need to rerun it with a longer timeout. The plan is to run pytest separately, extending the timeout to 120,000 milliseconds, or 2 minutes. So, I‚Äôll set that up to ensure it runs smoothly this time. Let's go for it!
exec
/bin/zsh -lc 'set -euo pipefail
uv run pytest -q
' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 12.40s:
........................................................................ [ 52%]
..................................................................       [100%]
138 passed in 11.91s
file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

Plan update
  ‚úì Load task and skill instructions
  ‚úì Run legacy vs ph parity diff
  ‚úì Implement parity and add tests
  ‚úì Run ruff and pytest
  ‚Üí Update bookkeeping and commit
  ‚Ä¢ Create marker and report
file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

exec
/bin/zsh -lc 'date -u +"%Y-%m-%dT%H:%M:%SZ"' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 54ms:
2026-02-04T22:00:58Z
file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

exec
/bin/zsh -lc "rg -n \"\\\"id\\\": \\\"V1P-0007\\\"\" -n cli_plan/tasks_v1_parity.json && python - <<'PY'
from pathlib import Path
p=Path('cli_plan/tasks_v1_parity.json')
lines=p.read_text().splitlines()
for i,l in enumerate(lines):
  if '\"id\": \"V1P-0007\"' in l:
    start=max(0,i-5);end=min(len(lines), i+25)
    for j in range(start,end):
      print(f\"{j+1:4d} {lines[j]}\")
    break
PY" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 131ms:
237:      "id": "V1P-0007",
 232       "depends_on": [],
 233       "work_location": "cli_repo",
 234       "kickoff_prompt": "Goal: strict parity for: `make help backlog` / `make help-backlog` \u2192 `ph help backlog`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help backlog`\n- Outputs to verify: (none; stdout only)\n"
 235     },
 236     {
 237       "id": "V1P-0007",
 238       "phase_id": "PHASE-P01",
 239       "order": 7,
 240       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
 241       "status": "in_progress",
 242       "started_at": "2026-02-04T21:56:20Z",
 243       "depends_on": [],
 244       "work_location": "cli_repo",
 245       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
 246     },
 247     {
 248       "id": "V1P-0008",
 249       "phase_id": "PHASE-P01",
 250       "order": 8,
file update:
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):


thinking
**Applying patches**

I‚Äôm looking at patching lines 241-242 and adding a completed_at field. I'm considering whether I should also remove the started_at field‚Äîthough I might decide to keep it. It seems logical to add completed_at after started_at, so I‚Äôm going to go ahead and apply this patch. Keeping it organized and clear is key to making this work effectively! Let‚Äôs see how this will turn out.
file update
M /Users/spensermcconnell/__Active_Code/project-handbook-cli/cli_plan/tasks_v1_parity.json
@@ -240,4 +240,5 @@
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
apply_patch(auto_approved=true) exited 0 in 42ms:
Success. Updated the following files:
M cli_plan/tasks_v1_parity.json
file update:
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

file update:
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):


thinking
**Updating project tasks**

I need to make sure "Work performed (ordered)" includes captured outputs. I noticed a mismatch, so I've updated the help text and tests, then reran them with a clean diff. Also, for "Goal:", I should add that. Under "Files changed (exact paths):", I‚Äôll list four file paths. For "Verification:", I'll state that the diff shows no changes, ruff passed, and pytest passed. The outcome should be "done" with a summary. Next, I‚Äôll work on task V1P-0008. Let's patch the last entry and update the placeholder content!
exec
/bin/zsh -lc 'tail -n 80 cli_plan/session_logs.md' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 49ms:

Goal:
Match legacy `pnpm make -- help backlog` stdout byte-for-byte via `ph --root <PH_ROOT> help backlog`.

Work performed (ordered):
1. Captured legacy stdout for `help backlog` (and `help-backlog`) against a disposable `PH_ROOT`.
2. Captured `ph` stdout for `help backlog` against the same `PH_ROOT` and diffed outputs.
3. Updated `src/ph/help_text.py` backlog topic to mirror legacy `make backlog-*` help text.
4. Added a deterministic pytest asserting exact stdout for `ph help backlog`.

Commands executed (exact):
- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0006-XXXXXXXX)"
- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
- (cd "$PH_ROOT" && pnpm make -- help backlog) > /tmp/legacy-help-backlog.txt
- (cd "$PH_ROOT" && pnpm make -- help-backlog) > /tmp/legacy-help-backlog-dashed.txt
- uv run ph --root "$PH_ROOT" help backlog > /tmp/ph-help-backlog.txt
- diff -u /tmp/legacy-help-backlog.txt /tmp/ph-help-backlog.txt
- uv run ruff check .
file update:
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

exec
/bin/zsh -lc 'rg -n "''^Agent:" -n cli_plan/session_logs.md | tail -n 5' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 51ms:
5356:Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
5416:Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
5476:Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
5536:Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
5594:Agent:
file update:
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

exec
/bin/zsh -lc "python - <<'PY'
from pathlib import Path
p=Path('cli_plan/session_logs.md')
lines=p.read_text().splitlines()
for ln in (5536,):
  start=ln-5;end=ln+20
  for i in range(start,end):
    if 1<=i<=len(lines):
      print(f\"{i:5d} {lines[i-1]}\")
PY" in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 128ms:
 5531 Blockers (if blocked):
 5532 - (none)
 5533 
 5534 ## 2026-02-04 21:43 UTC ‚Äî V1P-0006 ‚Äî Parity: `make help backlog` ‚Üí `ph help backlog`
 5535 
 5536 Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
 5537 Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
 5538 Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 5539 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
 5540 
 5541 Inputs reviewed:
 5542 - cli_plan/AI_AGENT_START_HERE.md
 5543 - cli_plan/tasks_v1_parity.json (task V1P-0006)
 5544 - cli_plan/PARITY_CHECKLIST.md
 5545 - cli_plan/v1_cli/CLI_CONTRACT.md
 5546 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
 5547 - src/ph/help_text.py
 5548 - tests/test_help_topics.py
 5549 
 5550 Goal:
file update:
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):


thinking
I'm noting that the outcome status is done, which is a relief! Now, I‚Äôm moving on to the next task, which is V1P-0008. I plan to focus on just patching the stub region and using "apply_patch" to replace placeholders. It's definitely a straightforward step, but I want to ensure I get it right, so I‚Äôll proceed carefully. Let‚Äôs see how that goes!
file update
M /Users/spensermcconnell/__Active_Code/project-handbook-cli/cli_plan/session_logs.md
@@ -5593,5 +5593,5 @@
 
-Agent:
-Environment:
-Handbook instance repo:
+Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
+Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
+Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
@@ -5604,23 +5604,44 @@
 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Goal:
+Match legacy `pnpm make -- help parking` stdout byte-for-byte via `ph --root <PH_ROOT> help parking`.
 
 Work performed (ordered):
-1.
+1. Captured legacy stdout for `help parking` (and `help-parking`) against a disposable `PH_ROOT`.
+2. Captured `ph` stdout for `help parking` against the same `PH_ROOT` and diffed outputs (initial mismatch).
+3. Updated `src/ph/help_text.py` parking topic to mirror legacy `make parking-*` help text.
+4. Added a deterministic pytest asserting exact stdout for `ph help parking`.
+5. Re-ran legacy vs `ph` capture + diff; verified byte-for-byte match.
 
 Commands executed (exact):
-- (pending)
+- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
+- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
+- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
+- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
+- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
+- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
+- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
+- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
+- uv run ruff check .
+- uv run pytest -q
 
 Files changed (exact paths):
-- (pending)
+- cli_plan/session_logs.md
+- cli_plan/tasks_v1_parity.json
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Verification:
-- (pending)
+- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` returned no diff (byte-for-byte match).
+- `uv run ruff check .` (pass)
+- `uv run pytest -q` (pass)
 
 Outcome:
-- status: done | blocked
-- summary:
+- status: done
+- summary: `ph --root <PH_ROOT> help parking` now matches legacy `pnpm make -- help parking` stdout byte-for-byte; parity locked via pytest.
 
 Next task:
-- (pending)
+- V1P-0008
 
apply_patch(auto_approved=true) exited 0 in 54ms:
Success. Updated the following files:
M cli_plan/session_logs.md
file update:
diff --git a/cli_plan/session_logs.md b/cli_plan/session_logs.md
index 9f9d668e18220c9f1ee222d1e8c3a03f8dd23e2c..b647090994fa1596e8133344b0515a5661d6525d
--- a/cli_plan/session_logs.md
+++ b/cli_plan/session_logs.md
@@ -5591,9 +5591,9 @@
 
 ## 2026-02-04 21:56 UTC ‚Äî V1P-0007 ‚Äî Parity: `make help parking` ‚Üí `ph help parking`
 
-Agent:
-Environment:
-Handbook instance repo:
+Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
+Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
+Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
 
 Inputs reviewed:
@@ -5602,27 +5602,48 @@
 - cli_plan/PARITY_CHECKLIST.md
 - cli_plan/v1_cli/CLI_CONTRACT.md
 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Goal:
+Match legacy `pnpm make -- help parking` stdout byte-for-byte via `ph --root <PH_ROOT> help parking`.
 
 Work performed (ordered):
-1.
+1. Captured legacy stdout for `help parking` (and `help-parking`) against a disposable `PH_ROOT`.
+2. Captured `ph` stdout for `help parking` against the same `PH_ROOT` and diffed outputs (initial mismatch).
+3. Updated `src/ph/help_text.py` parking topic to mirror legacy `make parking-*` help text.
+4. Added a deterministic pytest asserting exact stdout for `ph help parking`.
+5. Re-ran legacy vs `ph` capture + diff; verified byte-for-byte match.
 
 Commands executed (exact):
-- (pending)
+- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
+- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
+- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
+- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
+- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
+- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
+- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
+- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
+- uv run ruff check .
+- uv run pytest -q
 
 Files changed (exact paths):
-- (pending)
+- cli_plan/session_logs.md
+- cli_plan/tasks_v1_parity.json
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Verification:
-- (pending)
+- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` returned no diff (byte-for-byte match).
+- `uv run ruff check .` (pass)
+- `uv run pytest -q` (pass)
 
 Outcome:
-- status: done | blocked
-- summary:
+- status: done
+- summary: `ph --root <PH_ROOT> help parking` now matches legacy `pnpm make -- help parking` stdout byte-for-byte; parity locked via pytest.
 
 Next task:
-- (pending)
+- V1P-0008
 
 Blockers (if blocked):
 - (none)
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

file update:
diff --git a/cli_plan/session_logs.md b/cli_plan/session_logs.md
index 9f9d668e18220c9f1ee222d1e8c3a03f8dd23e2c..b647090994fa1596e8133344b0515a5661d6525d
--- a/cli_plan/session_logs.md
+++ b/cli_plan/session_logs.md
@@ -5591,9 +5591,9 @@
 
 ## 2026-02-04 21:56 UTC ‚Äî V1P-0007 ‚Äî Parity: `make help parking` ‚Üí `ph help parking`
 
-Agent:
-Environment:
-Handbook instance repo:
+Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
+Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
+Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
 
 Inputs reviewed:
@@ -5602,27 +5602,48 @@
 - cli_plan/PARITY_CHECKLIST.md
 - cli_plan/v1_cli/CLI_CONTRACT.md
 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Goal:
+Match legacy `pnpm make -- help parking` stdout byte-for-byte via `ph --root <PH_ROOT> help parking`.
 
 Work performed (ordered):
-1.
+1. Captured legacy stdout for `help parking` (and `help-parking`) against a disposable `PH_ROOT`.
+2. Captured `ph` stdout for `help parking` against the same `PH_ROOT` and diffed outputs (initial mismatch).
+3. Updated `src/ph/help_text.py` parking topic to mirror legacy `make parking-*` help text.
+4. Added a deterministic pytest asserting exact stdout for `ph help parking`.
+5. Re-ran legacy vs `ph` capture + diff; verified byte-for-byte match.
 
 Commands executed (exact):
-- (pending)
+- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
+- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
+- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
+- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
+- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
+- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
+- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
+- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
+- uv run ruff check .
+- uv run pytest -q
 
 Files changed (exact paths):
-- (pending)
+- cli_plan/session_logs.md
+- cli_plan/tasks_v1_parity.json
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Verification:
-- (pending)
+- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` returned no diff (byte-for-byte match).
+- `uv run ruff check .` (pass)
+- `uv run pytest -q` (pass)
 
 Outcome:
-- status: done | blocked
-- summary:
+- status: done
+- summary: `ph --root <PH_ROOT> help parking` now matches legacy `pnpm make -- help parking` stdout byte-for-byte; parity locked via pytest.
 
 Next task:
-- (pending)
+- V1P-0008
 
 Blockers (if blocked):
 - (none)
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):


thinking
**Preparing for commit**

I need to commit my changes, but first, I've got to ensure that everything's in order. I should update the parity tasks file and the tests, making sure that everything passes. So, let's start by checking the `git status` to see what changes are pending. I‚Äôll also do a quick `git diff` to ensure there are no unexpected modifications. I‚Äôll run these commands in the shell for clarity.
exec
/bin/zsh -lc 'git status --porcelain && git diff --stat' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 81ms:
 M cli_plan/session_logs.md
 M cli_plan/tasks_v1_parity.json
 M src/ph/help_text.py
 M tests/test_help_topics.py
?? .codex-agent-V1P-0006.log
?? .codex-agent-V1P-0006.pid
?? .codex-agent-V1P-0007.log
?? .codex-agent-V1P-0007.pid
?? ph-parity-V1P-0002.done
?? ph-parity-V1P-0003.done
?? ph-parity-V1P-0004.done
?? ph-parity-V1P-0006.done
 cli_plan/session_logs.md      | 59 +++++++++++++++++++++++++++++++++++++++++++
 cli_plan/tasks_v1_parity.json |  4 ++-
 src/ph/help_text.py           |  8 +++---
 tests/test_help_topics.py     | 29 +++++++++++++++++++++
 4 files changed, 95 insertions(+), 5 deletions(-)
file update:
diff --git a/cli_plan/session_logs.md b/cli_plan/session_logs.md
index 9f9d668e18220c9f1ee222d1e8c3a03f8dd23e2c..b647090994fa1596e8133344b0515a5661d6525d
--- a/cli_plan/session_logs.md
+++ b/cli_plan/session_logs.md
@@ -5591,9 +5591,9 @@
 
 ## 2026-02-04 21:56 UTC ‚Äî V1P-0007 ‚Äî Parity: `make help parking` ‚Üí `ph help parking`
 
-Agent:
-Environment:
-Handbook instance repo:
+Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
+Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
+Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
 
 Inputs reviewed:
@@ -5602,27 +5602,48 @@
 - cli_plan/PARITY_CHECKLIST.md
 - cli_plan/v1_cli/CLI_CONTRACT.md
 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Goal:
+Match legacy `pnpm make -- help parking` stdout byte-for-byte via `ph --root <PH_ROOT> help parking`.
 
 Work performed (ordered):
-1.
+1. Captured legacy stdout for `help parking` (and `help-parking`) against a disposable `PH_ROOT`.
+2. Captured `ph` stdout for `help parking` against the same `PH_ROOT` and diffed outputs (initial mismatch).
+3. Updated `src/ph/help_text.py` parking topic to mirror legacy `make parking-*` help text.
+4. Added a deterministic pytest asserting exact stdout for `ph help parking`.
+5. Re-ran legacy vs `ph` capture + diff; verified byte-for-byte match.
 
 Commands executed (exact):
-- (pending)
+- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
+- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
+- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
+- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
+- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
+- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
+- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
+- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
+- uv run ruff check .
+- uv run pytest -q
 
 Files changed (exact paths):
-- (pending)
+- cli_plan/session_logs.md
+- cli_plan/tasks_v1_parity.json
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Verification:
-- (pending)
+- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` returned no diff (byte-for-byte match).
+- `uv run ruff check .` (pass)
+- `uv run pytest -q` (pass)
 
 Outcome:
-- status: done | blocked
-- summary:
+- status: done
+- summary: `ph --root <PH_ROOT> help parking` now matches legacy `pnpm make -- help parking` stdout byte-for-byte; parity locked via pytest.
 
 Next task:
-- (pending)
+- V1P-0008
 
 Blockers (if blocked):
 - (none)
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):


thinking
**Committing changes**

I'm planning to run several git commands to manage my version control. First, I‚Äôll add specific files to the staging area with `git add`. Before I commit, I want to run `git diff` to check if anything has changed in the parking help text, just to be sure. Once I confirm that‚Äôs good, I'll make the commit with a clear message. Then, I‚Äôll create a marker file. Let‚Äôs proceed with the commit!
exec
/bin/zsh -lc 'set -euo pipefail
git add cli_plan/session_logs.md cli_plan/tasks_v1_parity.json src/ph/help_text.py tests/test_help_topics.py
git commit -m "Parity: V1P-0007 help parking"
' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 84ms:
[main 725dca4] Parity: V1P-0007 help parking
 4 files changed, 95 insertions(+), 5 deletions(-)
file update:
diff --git a/cli_plan/session_logs.md b/cli_plan/session_logs.md
index 9f9d668e18220c9f1ee222d1e8c3a03f8dd23e2c..b647090994fa1596e8133344b0515a5661d6525d
--- a/cli_plan/session_logs.md
+++ b/cli_plan/session_logs.md
@@ -5591,9 +5591,9 @@
 
 ## 2026-02-04 21:56 UTC ‚Äî V1P-0007 ‚Äî Parity: `make help parking` ‚Üí `ph help parking`
 
-Agent:
-Environment:
-Handbook instance repo:
+Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
+Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
+Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
 
 Inputs reviewed:
@@ -5602,27 +5602,48 @@
 - cli_plan/PARITY_CHECKLIST.md
 - cli_plan/v1_cli/CLI_CONTRACT.md
 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Goal:
+Match legacy `pnpm make -- help parking` stdout byte-for-byte via `ph --root <PH_ROOT> help parking`.
 
 Work performed (ordered):
-1.
+1. Captured legacy stdout for `help parking` (and `help-parking`) against a disposable `PH_ROOT`.
+2. Captured `ph` stdout for `help parking` against the same `PH_ROOT` and diffed outputs (initial mismatch).
+3. Updated `src/ph/help_text.py` parking topic to mirror legacy `make parking-*` help text.
+4. Added a deterministic pytest asserting exact stdout for `ph help parking`.
+5. Re-ran legacy vs `ph` capture + diff; verified byte-for-byte match.
 
 Commands executed (exact):
-- (pending)
+- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
+- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
+- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
+- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
+- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
+- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
+- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
+- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
+- uv run ruff check .
+- uv run pytest -q
 
 Files changed (exact paths):
-- (pending)
+- cli_plan/session_logs.md
+- cli_plan/tasks_v1_parity.json
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Verification:
-- (pending)
+- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` returned no diff (byte-for-byte match).
+- `uv run ruff check .` (pass)
+- `uv run pytest -q` (pass)
 
 Outcome:
-- status: done | blocked
-- summary:
+- status: done
+- summary: `ph --root <PH_ROOT> help parking` now matches legacy `pnpm make -- help parking` stdout byte-for-byte; parity locked via pytest.
 
 Next task:
-- (pending)
+- V1P-0008
 
 Blockers (if blocked):
 - (none)
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

exec
/bin/zsh -lc 'touch ph-parity-V1P-0007.done
git status --porcelain' in /Users/spensermcconnell/__Active_Code/project-handbook-cli succeeded in 66ms:
?? .codex-agent-V1P-0006.log
?? .codex-agent-V1P-0006.pid
?? .codex-agent-V1P-0007.log
?? .codex-agent-V1P-0007.pid
?? ph-parity-V1P-0002.done
?? ph-parity-V1P-0003.done
?? ph-parity-V1P-0004.done
?? ph-parity-V1P-0006.done
?? ph-parity-V1P-0007.done
file update:
diff --git a/cli_plan/session_logs.md b/cli_plan/session_logs.md
index 9f9d668e18220c9f1ee222d1e8c3a03f8dd23e2c..b647090994fa1596e8133344b0515a5661d6525d
--- a/cli_plan/session_logs.md
+++ b/cli_plan/session_logs.md
@@ -5591,9 +5591,9 @@
 
 ## 2026-02-04 21:56 UTC ‚Äî V1P-0007 ‚Äî Parity: `make help parking` ‚Üí `ph help parking`
 
-Agent:
-Environment:
-Handbook instance repo:
+Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
+Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
+Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
 
 Inputs reviewed:
@@ -5602,27 +5602,48 @@
 - cli_plan/PARITY_CHECKLIST.md
 - cli_plan/v1_cli/CLI_CONTRACT.md
 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Goal:
+Match legacy `pnpm make -- help parking` stdout byte-for-byte via `ph --root <PH_ROOT> help parking`.
 
 Work performed (ordered):
-1.
+1. Captured legacy stdout for `help parking` (and `help-parking`) against a disposable `PH_ROOT`.
+2. Captured `ph` stdout for `help parking` against the same `PH_ROOT` and diffed outputs (initial mismatch).
+3. Updated `src/ph/help_text.py` parking topic to mirror legacy `make parking-*` help text.
+4. Added a deterministic pytest asserting exact stdout for `ph help parking`.
+5. Re-ran legacy vs `ph` capture + diff; verified byte-for-byte match.
 
 Commands executed (exact):
-- (pending)
+- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
+- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
+- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
+- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
+- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
+- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
+- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
+- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
+- uv run ruff check .
+- uv run pytest -q
 
 Files changed (exact paths):
-- (pending)
+- cli_plan/session_logs.md
+- cli_plan/tasks_v1_parity.json
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Verification:
-- (pending)
+- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` returned no diff (byte-for-byte match).
+- `uv run ruff check .` (pass)
+- `uv run pytest -q` (pass)
 
 Outcome:
-- status: done | blocked
-- summary:
+- status: done
+- summary: `ph --root <PH_ROOT> help parking` now matches legacy `pnpm make -- help parking` stdout byte-for-byte; parity locked via pytest.
 
 Next task:
-- (pending)
+- V1P-0008
 
 Blockers (if blocked):
 - (none)
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

Plan update
  ‚úì Load task and skill instructions
  ‚úì Run legacy vs ph parity diff
  ‚úì Implement parity and add tests
  ‚úì Run ruff and pytest
  ‚úì Update bookkeeping and commit
  ‚Üí Create marker and report
file update:
diff --git a/cli_plan/session_logs.md b/cli_plan/session_logs.md
index 9f9d668e18220c9f1ee222d1e8c3a03f8dd23e2c..b647090994fa1596e8133344b0515a5661d6525d
--- a/cli_plan/session_logs.md
+++ b/cli_plan/session_logs.md
@@ -5591,9 +5591,9 @@
 
 ## 2026-02-04 21:56 UTC ‚Äî V1P-0007 ‚Äî Parity: `make help parking` ‚Üí `ph help parking`
 
-Agent:
-Environment:
-Handbook instance repo:
+Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
+Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
+Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
 
 Inputs reviewed:
@@ -5602,27 +5602,48 @@
 - cli_plan/PARITY_CHECKLIST.md
 - cli_plan/v1_cli/CLI_CONTRACT.md
 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Goal:
+Match legacy `pnpm make -- help parking` stdout byte-for-byte via `ph --root <PH_ROOT> help parking`.
 
 Work performed (ordered):
-1.
+1. Captured legacy stdout for `help parking` (and `help-parking`) against a disposable `PH_ROOT`.
+2. Captured `ph` stdout for `help parking` against the same `PH_ROOT` and diffed outputs (initial mismatch).
+3. Updated `src/ph/help_text.py` parking topic to mirror legacy `make parking-*` help text.
+4. Added a deterministic pytest asserting exact stdout for `ph help parking`.
+5. Re-ran legacy vs `ph` capture + diff; verified byte-for-byte match.
 
 Commands executed (exact):
-- (pending)
+- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
+- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
+- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
+- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
+- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
+- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
+- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
+- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
+- uv run ruff check .
+- uv run pytest -q
 
 Files changed (exact paths):
-- (pending)
+- cli_plan/session_logs.md
+- cli_plan/tasks_v1_parity.json
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Verification:
-- (pending)
+- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` returned no diff (byte-for-byte match).
+- `uv run ruff check .` (pass)
+- `uv run pytest -q` (pass)
 
 Outcome:
-- status: done | blocked
-- summary:
+- status: done
+- summary: `ph --root <PH_ROOT> help parking` now matches legacy `pnpm make -- help parking` stdout byte-for-byte; parity locked via pytest.
 
 Next task:
-- (pending)
+- V1P-0008
 
 Blockers (if blocked):
 - (none)
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):


thinking
**Finalizing task updates**

I want to make sure we didn't accidentally change anything in other tasks. It looks like I need to update the plan to mark the last step as completed after sending the response. So, I‚Äôll call the update_plan function now to reflect that everything has been finalized before sending the final message. That way, everything stays organized and nothing gets missed!
Plan update
  ‚úì Load task and skill instructions
  ‚úì Run legacy vs ph parity diff
  ‚úì Implement parity and add tests
  ‚úì Run ruff and pytest
  ‚úì Update bookkeeping and commit
  ‚úì Create marker and report
file update:
diff --git a/cli_plan/session_logs.md b/cli_plan/session_logs.md
index 9f9d668e18220c9f1ee222d1e8c3a03f8dd23e2c..b647090994fa1596e8133344b0515a5661d6525d
--- a/cli_plan/session_logs.md
+++ b/cli_plan/session_logs.md
@@ -5591,9 +5591,9 @@
 
 ## 2026-02-04 21:56 UTC ‚Äî V1P-0007 ‚Äî Parity: `make help parking` ‚Üí `ph help parking`
 
-Agent:
-Environment:
-Handbook instance repo:
+Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
+Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
+Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
 
 Inputs reviewed:
@@ -5602,27 +5602,48 @@
 - cli_plan/PARITY_CHECKLIST.md
 - cli_plan/v1_cli/CLI_CONTRACT.md
 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Goal:
+Match legacy `pnpm make -- help parking` stdout byte-for-byte via `ph --root <PH_ROOT> help parking`.
 
 Work performed (ordered):
-1.
+1. Captured legacy stdout for `help parking` (and `help-parking`) against a disposable `PH_ROOT`.
+2. Captured `ph` stdout for `help parking` against the same `PH_ROOT` and diffed outputs (initial mismatch).
+3. Updated `src/ph/help_text.py` parking topic to mirror legacy `make parking-*` help text.
+4. Added a deterministic pytest asserting exact stdout for `ph help parking`.
+5. Re-ran legacy vs `ph` capture + diff; verified byte-for-byte match.
 
 Commands executed (exact):
-- (pending)
+- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
+- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
+- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
+- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
+- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
+- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
+- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
+- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
+- uv run ruff check .
+- uv run pytest -q
 
 Files changed (exact paths):
-- (pending)
+- cli_plan/session_logs.md
+- cli_plan/tasks_v1_parity.json
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Verification:
-- (pending)
+- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` returned no diff (byte-for-byte match).
+- `uv run ruff check .` (pass)
+- `uv run pytest -q` (pass)
 
 Outcome:
-- status: done | blocked
-- summary:
+- status: done
+- summary: `ph --root <PH_ROOT> help parking` now matches legacy `pnpm make -- help parking` stdout byte-for-byte; parity locked via pytest.
 
 Next task:
-- (pending)
+- V1P-0008
 
 Blockers (if blocked):
 - (none)
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

codex
Commands executed (exact):
- `LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"`
- `PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"`
- `rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"`
- `(cd "$PH_ROOT" && pnpm install --frozen-lockfile)`
- `(cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt`
- `(cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt`
- `uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt`
- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt`
- `uv run ruff check .`
- `uv run pytest -q`

Files changed (exact):
- `src/ph/help_text.py`
- `tests/test_help_topics.py`
- `cli_plan/tasks_v1_parity.json`
- `cli_plan/session_logs.md`

Verification evidence:
- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` produced no output (exit code `0`).
- `uv run ruff check .` => `All checks passed!`
- `uv run pytest -q` => `138 passed in 11.91s`

Commit:
- `725dca4` (message: `Parity: V1P-0007 help parking`)

Follow-ups / discovered drift:
- Legacy `help parking` vs `help-parking` differs only in the printed preamble command (`> make -- help parking` vs `> make -- help-parking`); body text matches.
- Untracked artifacts present in repo root: `.codex-agent-V1P-0006.{log,pid}`, `.codex-agent-V1P-0007.{log,pid}`, and prior `ph-parity-V1P-000*.done` markers (not committed).

DONE: V1P-0007 ‚Äî `ph help parking` stdout now matches legacy byte-for-byte (parity locked via pytest)
file update:
diff --git a/cli_plan/session_logs.md b/cli_plan/session_logs.md
index 9f9d668e18220c9f1ee222d1e8c3a03f8dd23e2c..b647090994fa1596e8133344b0515a5661d6525d
--- a/cli_plan/session_logs.md
+++ b/cli_plan/session_logs.md
@@ -5591,9 +5591,9 @@
 
 ## 2026-02-04 21:56 UTC ‚Äî V1P-0007 ‚Äî Parity: `make help parking` ‚Üí `ph help parking`
 
-Agent:
-Environment:
-Handbook instance repo:
+Agent: GPT-5.2 (Codex CLI Orchestrator) + background Codex exec
+Environment: approval_policy=never; sandbox_mode=danger-full-access; network_access=enabled; shell=zsh
+Handbook instance repo: disposable temp copy (created via `mktemp -d` from `/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook`)
 CLI repo: /Users/spensermcconnell/__Active_Code/project-handbook-cli
 
 Inputs reviewed:
@@ -5602,27 +5602,48 @@
 - cli_plan/PARITY_CHECKLIST.md
 - cli_plan/v1_cli/CLI_CONTRACT.md
 - /Users/spensermcconnell/.codex/skills/coding-agent/SKILL.md
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Goal:
+Match legacy `pnpm make -- help parking` stdout byte-for-byte via `ph --root <PH_ROOT> help parking`.
 
 Work performed (ordered):
-1.
+1. Captured legacy stdout for `help parking` (and `help-parking`) against a disposable `PH_ROOT`.
+2. Captured `ph` stdout for `help parking` against the same `PH_ROOT` and diffed outputs (initial mismatch).
+3. Updated `src/ph/help_text.py` parking topic to mirror legacy `make parking-*` help text.
+4. Added a deterministic pytest asserting exact stdout for `ph help parking`.
+5. Re-ran legacy vs `ph` capture + diff; verified byte-for-byte match.
 
 Commands executed (exact):
-- (pending)
+- LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"
+- PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"
+- rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"
+- (cd "$PH_ROOT" && pnpm install --frozen-lockfile)
+- (cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt
+- (cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt
+- uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt
+- diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt
+- uv run ruff check .
+- uv run pytest -q
 
 Files changed (exact paths):
-- (pending)
+- cli_plan/session_logs.md
+- cli_plan/tasks_v1_parity.json
+- src/ph/help_text.py
+- tests/test_help_topics.py
 
 Verification:
-- (pending)
+- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` returned no diff (byte-for-byte match).
+- `uv run ruff check .` (pass)
+- `uv run pytest -q` (pass)
 
 Outcome:
-- status: done | blocked
-- summary:
+- status: done
+- summary: `ph --root <PH_ROOT> help parking` now matches legacy `pnpm make -- help parking` stdout byte-for-byte; parity locked via pytest.
 
 Next task:
-- (pending)
+- V1P-0008
 
 Blockers (if blocked):
 - (none)
diff --git a/cli_plan/tasks_v1_parity.json b/cli_plan/tasks_v1_parity.json
index 779028fc613da8a334c46e6ffd6746ce3723b108..15fe89ebfc920e15eb73ad60e3779b6cad186a3f
--- a/cli_plan/tasks_v1_parity.json
+++ b/cli_plan/tasks_v1_parity.json
@@ -238,8 +238,9 @@
       "phase_id": "PHASE-P01",
       "order": 7,
       "title": "Parity: `make help parking` / `make help-parking` \u2192 `ph help parking`",
-      "status": "in_progress",
+      "status": "done",
       "started_at": "2026-02-04T21:56:20Z",
+      "completed_at": "2026-02-04T22:00:58Z",
       "depends_on": [],
       "work_location": "cli_repo",
       "kickoff_prompt": "Goal: strict parity for: `make help parking` / `make help-parking` \u2192 `ph help parking`\n\nReference: cli_plan/PARITY_CHECKLIST.md (section: Help)\n\nCreate a disposable handbook instance for parity testing:\n- Copy `legacy-reference/project-handbook/` to a fresh temp directory (do not run on the real repo).\n- Use that copied directory as `PH_ROOT` for BOTH legacy and `ph` commands.\n\nSteps:\n1) Run the legacy command(s) listed in the checklist and capture stdout + filesystem outputs.\n2) Run the corresponding `ph` command and capture stdout + filesystem outputs.\n3) Compare against the checklist\u2019s \u2018Outputs to verify\u2019.\n4) If mismatched: fix implementation + update/add pytest tests so parity is enforced deterministically.\n\nChecklist details:\n- Preconditions: none\n- Command: `ph --root <PH_ROOT> help parking`\n- Outputs to verify: (none; stdout only)\n"
diff --git a/src/ph/help_text.py b/src/ph/help_text.py
index 2d9532c23fd717c66e30498a4acf22702d44ec85..c7570f4c6788cd8f3d7a2f125b2f4de6ae8ee37b
--- a/src/ph/help_text.py
+++ b/src/ph/help_text.py
@@ -81,10 +81,10 @@
   make backlog-stats             - Metrics grouped by severity/category
 """,
     "parking": """Parking lot workflow commands
-  ph parking add --type features --title 'Idea' --desc 'Y' [--owner @alice] [--tags 'foo,bar']
-  ph parking list [--category labs] [--format table]
-  ph parking review            - Guided quarterly review session
-  ph parking promote --item FEAT-001 --target later
+  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']
+  make parking-list [category=labs] [format=table]
+  make parking-review            - Guided quarterly review session
+  make parking-promote item=FEAT-001 target=later
 """,
     "validation": """Validation, status, and test commands
   ph validate --quick            - Fast lint (runs automatically after every ph)
diff --git a/tests/test_help_topics.py b/tests/test_help_topics.py
index ac47739d6c241937f22a259ae0219db4b5a39c23..fa73fa77fd998b4e5735080a35ed38957a796bca
--- a/tests/test_help_topics.py
+++ b/tests/test_help_topics.py
@@ -114,6 +114,20 @@
     ).encode()
 
 
+def _expected_help_parking_stdout(*, resolved: Path) -> bytes:
+    return (
+        "\n"
+        f"> project-handbook@0.0.0 make {resolved}\n"
+        "> make -- help parking\n"
+        "\n"
+        "Parking lot workflow commands\n"
+        "  make parking-add type=features title='Idea' desc='Y' [owner=@alice] [tags='foo,bar']\n"
+        "  make parking-list [category=labs] [format=table]\n"
+        "  make parking-review            - Guided quarterly review session\n"
+        "  make parking-promote item=FEAT-001 target=later\n"
+    ).encode()
+
+
 def test_help_stdout_matches_legacy_make_help(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     result = subprocess.run(["ph", "help", "--root", str(tmp_path)], capture_output=True)
@@ -234,6 +248,21 @@
     assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
 
 
+def test_help_parking_stdout_matches_legacy_pnpm_make_help_parking(tmp_path: Path) -> None:
+    _write_minimal_ph_root(tmp_path)
+    _write_legacy_like_package_json(tmp_path)
+    resolved = tmp_path.resolve()
+
+    result = subprocess.run(["ph", "--root", str(tmp_path), "help", "parking"], capture_output=True)
+    assert result.returncode == 0
+    assert result.stdout == _expected_help_parking_stdout(resolved=resolved)
+
+    history_log = tmp_path / ".project-handbook" / "history.log"
+    assert history_log.exists()
+    assert history_log.stat().st_size > 0
+    assert not (tmp_path / ".project-handbook" / "status" / "validation.json").exists()
+
+
 def test_help_topics_exist(tmp_path: Path) -> None:
     _write_minimal_ph_root(tmp_path)
     for topic in ("sprint", "task", "feature", "release", "backlog", "parking", "validation", "utilities", "roadmap"):

tokens used
57,927
Commands executed (exact):
- `LEGACY_SRC="/Users/spensermcconnell/__Active_Code/oss-saas/project-handbook"`
- `PH_ROOT="$(mktemp -d -t ph-parity-V1P-0007-XXXXXXXX)"`
- `rsync -a --delete --exclude '.git' --exclude 'node_modules' --exclude '.venv' --exclude '.project-handbook' "$LEGACY_SRC/" "$PH_ROOT/"`
- `(cd "$PH_ROOT" && pnpm install --frozen-lockfile)`
- `(cd "$PH_ROOT" && pnpm make -- help parking) > /tmp/legacy-help-parking.txt`
- `(cd "$PH_ROOT" && pnpm make -- help-parking) > /tmp/legacy-help-parking-dashed.txt`
- `uv run ph --root "$PH_ROOT" help parking > /tmp/ph-help-parking.txt`
- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt`
- `uv run ruff check .`
- `uv run pytest -q`

Files changed (exact):
- `src/ph/help_text.py`
- `tests/test_help_topics.py`
- `cli_plan/tasks_v1_parity.json`
- `cli_plan/session_logs.md`

Verification evidence:
- `diff -u /tmp/legacy-help-parking.txt /tmp/ph-help-parking.txt` produced no output (exit code `0`).
- `uv run ruff check .` => `All checks passed!`
- `uv run pytest -q` => `138 passed in 11.91s`

Commit:
- `725dca4` (message: `Parity: V1P-0007 help parking`)

Follow-ups / discovered drift:
- Legacy `help parking` vs `help-parking` differs only in the printed preamble command (`> make -- help parking` vs `> make -- help-parking`); body text matches.
- Untracked artifacts present in repo root: `.codex-agent-V1P-0006.{log,pid}`, `.codex-agent-V1P-0007.{log,pid}`, and prior `ph-parity-V1P-000*.done` markers (not committed).

DONE: V1P-0007 ‚Äî `ph help parking` stdout now matches legacy byte-for-byte (parity locked via pytest)
